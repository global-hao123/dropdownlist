<!doctype html>
<html lang="en" dir="ltr">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="../test/js/scrollable/scrollable.css" />
	<link rel="stylesheet" href="../src/dropdownlist.css" />
	<style>
		body{
			height: 3000px;
		}
		ul{
			padding:0;
			margin:0;
		}
		label{
			display: inline-block;
			width:350px;
			text-align:right;
		}
		select{
			width:174px;
		}

	</style>
</head>
<body>
	<div>
		<label for="select0">原生select：</label>
		<select id="select0">
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
		</select>
		<br/><br/>
		<div style="position:fixed;top:50px;left:600px">
			<label for="wmf">不指定value，默认取option的文案作为value：</label>
			<select id="wmf">
				<option>aaa</option>
				<option>bbb</option>
				<option>ccc</option>
			</select><br/><br/>
		</div>
		<label for="select1">内容固定，可以直接写在option中：</label>
		<select id="select1">
			<option value="1" title="aaaAAAAAaaaaaaaaaAAAAAaaaaaaaaaAAAAAaaaaaaaaaAAAAAaaaaaas">aaaAAAAAaaaaaaaaaAAAAAaaaaaaaaaAAAAAaaaaaaaaaAAAAAaaaaaas</option>
			<option value="2" title="bbb">bbb</option>
		</select>
		<br/><br/>
		<label for="select5">内容太长使用自定义滚动条：</label>
		<select id="select5"></select>
		<br/><br/>
		<label for="select51">内容太长使用原生滚动条：</label>
		<select id="select51"></select>
		<br/><br/>
		<label for="select3">设置默认值：</label>
		<select id="select3">
			<option value="1" title="aaa">aaa</option>
			<option value="2" title="bbb">bbb</option>
		</select>
		<br/><br/>
		<label for="select2">内容灵活作为参数传入：</label>
		<select id="select2"></select>
		<br/><br/>
		<label for="select4">设置默认值：</label>
		<select id="select4"></select>
		<br/><br/>
		<label for="select6">级联a：</label>
		<select id="select6"></select>
		<br/><br/>
		<label for="select7">级联b：</label>
		<select id="select7"></select>
		<br/><br/>
		<label for="select8">级联c：</label>
		<select id="select8"></select>
	</div>
</body>
<script>module = {};</script>
<script src="../test/js/jquery/jquery.js"></script>
<script src="../test/js/helper/helper.js"></script>
<script src="../test/js/scrollable/scrollable.js"></script>
<script src="../src/dropdownlist.js"></script>
<script>
	window.conf = window.conf || {};
	/*window.conf.UT = {tn:"1"};
	var UT={url:"/img/gut.gif",send:function(e,t){e=e||{};var n=window.conf.UT,r=t&&t.url||this.url,i=t&&t.params||n.params,s=e.r=+(new Date),o=window,u=encodeURIComponent,a=o["UT"+s]=new Image,f,l=[];if(i)for(var c in i)i[c]!==f&&e[c]===f&&(e[c]=i[c]);for(f in e)l.push(u(f)+"="+u(e[f]));a.onload=a.onerror=function(){o["UT"+s]=null},a.src=r+"?"+l.join("&"),a=l=null},attr:function(e,t){var n=e.getAttribute("log-mod");if(!n)e.parentNode&&e.parentNode.tagName.toUpperCase()!="BODY"&&this.attr(e.parentNode,t);else{var r=e.getAttribute("log-index");r&&(t.modIndex=r),t.modId=n}},link:function(e){var t={},n=e.getAttribute("href",2);n&&(/^(javascript|#)/.test(n)?(t.ac="b",t.url="none"):(t.ac="a",t.url=n));var r=e.getAttribute("log-index");r&&(t.linkIndex=r);var i=e.getAttribute("data-sort")||"";i&&(t.sort=i,t.value=e.getAttribute("data-value")||"");var s=e.getAttribute("log-oid");return s&&(t.offerid=s),this.attr(e,t),t}};
		UT.send({type:"access",tn:conf.UT.tn});
		!function(W,D,A,E,handle){D[A]?D[A](E,handle,!1):D.attachEvent("on"+E,handle)}(window,document,"addEventListener","mousedown",function(e){
				e = e || event;
				var t = e.target || e.srcElement;
				for (var n = 0; n <= 2; n++) {
				    if (t.tagName === "BODY" || t.tagName === "HTML") break;
				    if (t.tagName === "A") {
				        var data = UT.link(t);
				        data.position = "links";
				        UT.send(data);
				        break;
				    }
				    t = t.parentNode;
				}
			}
		);*/

	conf.dir = $("html").attr("dir");
	var data = [{
		id: "1",
		name: "aaaa"
	},{
		id: "2",
		name: "bbbb"
	}];
	var data1 = [];
	var data2 = [];
	for(var i=0;i<20;i++){
		data1[i] = {
			id: i,
			name: "aoption"+i
		};
		data2[i] = {
			id: i,
			name: "boption"+i
		};
	}
	var wmf = new Dropdownlist({
		selector: "wmf",
		appendToBody: 1,
		supportSubmit: 1
	});
	new Dropdownlist({
		selector: "select1",
		supportSubmit: 1
	});
	new Dropdownlist({
		selector: "select2",
		data: data,
		supportSubmit: 1
	});
	new Dropdownlist({
		selector: "select3",
		// data: [],
		defIndex: 1
	});
	new Dropdownlist({
		selector: "select4",
		data: data,
		defIndex: 1
	});
	new Dropdownlist({
		selector: "select5",
		data: data1,
		defIndex: 16,
		supportSubmit: 1,
		customScrollbar: 1
	});
	new Dropdownlist({
		selector: "select51",
		data: data1,
		defIndex: 16,
		supportSubmit: 1
	});
var rawData = [{
		id: "0",
		name: "0",
		brand: [{
			id: "0",
			name: "0-0",
			model:[{
				id: "0",
				name: "0-0-0"
			},{
				id: "1",
				name: "0-0-1"
			}]
		},{
			id: "1",
			name: "0-1",
			model:[{
				id: "0",
				name: "0-1-0"
			},{
				id: "1",
				name: "0-1-1"
			}]
		}]
	},{
		id: "1",
		name: "1",
		brand: [{
			id: "0",
			name: "1-0",
			model:[{
				id: "0",
				name: "1-0-0"
			},{
				id: "1",
				name: "1-0-1"
			}]
		},{
			id: "1",
			name: "1-1",
			model:[{
				id: "0",
				name: "1-1-0"
			},{
				id: "1",
				name: "1-1-1"
			}]
		}]
	}];

	function getData(data,param,prop){
		var result = data;
		result = result[param] && result[param][prop] ? result[param][prop] : [];
		return result;
	}
	var dropdown8 = new Dropdownlist({
		selector: "select8",
        allowEmpty: "1",
		emptyItem: {
            id: "",
            name: "ALL"
        }
	});

	var dropdown7 = new Dropdownlist({
		selector: "select7",
		child: dropdown8,
        allowEmpty: "1",
		emptyItem: {
            id: "",
            name: "ALL"
        },
		onChange: function(){
			var that = this;
			that.child.reset(getData(that.data,that.selIndex,"model"));
		}
	});

	var dropdown6 = new Dropdownlist({
		selector: "select6",
		child: dropdown7,
		data: rawData,
		emptyItem: {
            id: "",
            name: "ALL"
        },
		onChange: function(){
			var that = this;
			that.child.reset(getData(that.data,that.selIndex,"brand"));
		}
	});
</script>
</html>
